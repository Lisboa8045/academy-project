<table>
  <tr>
    <td>Name\Permissions</td>
    <th id="permissions-header" *ngFor="let perm of permissions;">{{ perm }}</th>
  </tr>
  @for (provider of serviceProviders(); track provider.id) {
    <tr>
      <td>{{ provider.memberName }}</td>

      @for (permission of permissions; track permission) {
        <td>
          <input type="checkbox" [checked]="provider.permissions.includes(permission)"
          (change)="togglePermission(provider, permission)">
        </td>
      }
      <button (click)="updatePermissions(provider)">Save</button>
      <button (click)="removeServiceProvider(provider)">Remove Worker</button>
    </tr>
  }
</table>
<select [(ngModel)]="selectedWorker" (click)="searchForNewWorkers()">
  <option [ngValue]="undefined" disabled selected>Select Worker To Add:</option>
  @if (!newWorkers) {
    <option [ngValue]="undefined"><app-loading/></option>
  } @else {
    @for (worker of newWorkers; track worker.id) {
      <option [ngValue]="worker">{{ worker.username }}</option>
    }
  }
</select>
<button type="button" (click)="addWorker()">Add Worker</button>
