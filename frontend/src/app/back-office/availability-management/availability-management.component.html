<div class="availability-management">
  <!-- Header Section -->
  <app-availability-header
    [isSettingDefaults]="isSettingDefaults"
    [hasChanges]="(localChanges.length > 0) || (deletedIds.length > 0)"
    (saveChanges)="onSaveChanges()">
  </app-availability-header>

  <!-- Help text for default setup -->
  <div *ngIf="isSettingDefaults" class="setup-instructions">
    <p>Please set your default weekly availability. These will be your regular working hours.</p>
    <p>You can add exceptions for specific dates later.</p>
  </div>

  <!-- Weekly Slots Grid -->
  <div class="weekly-slots">
    <app-availability-day-column
      *ngFor="let day of getWeekDays()"
      [day]="day"
      [isToday]="isToday(day)"
      [isSettingDefaults]="isSettingDefaults"
      [availabilities]="getAvailabilityForDay(day)"
      [hasDefaults]="hasDefaults"
      (addSlot)="onAddSlot($event)"
      (editSlot)="onEditSlot($event)"
      (deleteSlot)="onDeleteSlot($event)">
    </app-availability-day-column>
  </div>

  <!-- Modals -->
  <app-availability-form-modal
    *ngIf="showFormModal"
    [day]="selectedDay"
    [mode]="formMode"
    [isSettingDefaults]="isSettingDefaults"
    (close)="showFormModal = false"
    (submit)="onFormSubmit($event)">
  </app-availability-form-modal>
</div>
