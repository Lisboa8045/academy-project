@if (loading()) {
    <app-loading/>
} @else {
    <app-controls-bar
            [pageSize]="pageSize"
            [sortOrder]="sortOrder"
            [onChange]="onFilterChange.bind(this)">
    </app-controls-bar>
    <div class="main-content">
        <app-sidebar-filters
                [filters]="filters"
                [appliedFilters]="appliedFilters"
                [serviceTypes]="serviceTypes"
                [onFilterChange]="onFilterChange.bind(this)"
        ></app-sidebar-filters>
        <div class="results-container">

            <app-service-list
                    [services]="services">
            </app-service-list>

            @if (totalPages() > 1) {
                <nav aria-label="Page navigation">
                    <ul class="pagination-bar">
                        <li
                                class="page-item"
                                [class.disabled]="currentPage() === 0"
                                (click)="currentPage() > 0 && goToPreviousPage()"
                        >
                            Previous
                        </li>

                        <li
                                *ngFor="let page of getPaginationPages()"
                                class="page-item"
                                [class.active]="page === currentPage()"
                                [class.disabled]="page === '...'"
                                (click)="page !== '...' && goToPage(page)"
                        >
                            {{ page === '...' ? 'â€¦' : displayPageNumber(page) }}
                        </li>

                        <li
                                class="page-item"
                                [class.disabled]="currentPage() + 1 >= totalPages()"
                                (click)="currentPage() + 1 < totalPages() && goToNextPage()"
                        >
                            Next
                        </li>
                    </ul>
                </nav>
            }
        </div>
    </div>
}
